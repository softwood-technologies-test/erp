{% extends 'prodManagement/base.html' %}

{% block title %}
    Style Bulletins
{% endblock title %}

{% block content %}
    <div class="{{theme.border}}">
        <form action="{% url 'styleBulletins' %}" method="get" autocomplete="off">
            <div class="grid grid-cols-12 {{theme.justify}} {{theme.align}}">
                <div class="flex flex-col col-[1/5] items-center">
                    <span class="text-sm text-gray-500 mb-1">Search:</span>
                    <input type="text" class="{{theme.textInput}}" name="search" value="{{search}}" placeholder="">
                </div>
                <div class="flex flex-col col-[5/10] items-center">
                    <span class="text-sm text-gray-500 mb-1">Min SAM:</span>
                    <input type="number" class="{{theme.textInput}}" name="minSAM" value="{{minSAM}}" placeholder="">
                </div>
                <div class="flex col-[10/13] btn-group {{theme.align}} justify-end ml-1">
                    <button type="submit" class="{{theme.buttonBasic}}">Search</button>
                    <a class="{{theme.buttonBasic}}" href="{% url 'addStyleBulletin' %}" role="button">Add</a>
                </div>
            </div>
        </form>
    </div>

    <div id="bulletinTable" class="mt-6">
        <table class="{{theme.table}}">
            <tr class = "{{theme.tableHead}}">
                <th scope="col">Style</th>
                <th scope="col">SAM</th>
                <th scope="col">Rate</th>
                <th scope="col">Lead Time</th>
                <th scope="col">Sections</th>
                <th scope="col">Required Skills</th>
                <th scope="col">Machine Types</th>
            </tr>
            <tbody id="tableData" class = "{{theme.tableBody}}">
                {% for data in bulletins %}
                    <tr class="{{theme.tableBodyRow}}">
                        <td class="{{theme.hyperLink}}"><a href="{% url 'editStyleBulletin' pk=data.id %}">{{ data.StyleCode }}</a></td>
                        <td>{{ data.SMV }}</td>
                        <td>Rs. {{ data.Rate }}/-</td>
                        <td>{{ data.LeadTime }} days</td>
                        <td>
                            {% for key, value in data.Sections.items %}
                                {{key}}: {{value}}%<br>
                            {% endfor %}     
                        </td>
                        <td>
                            {% for key, value in data.SkillLevels.items %}
                                Level {{key}}: {{value}}%<br>
                            {% endfor %}     
                        </td>
                        <td>
                            {% for key, value in data.MachineTypes.items %}
                                {{key}}: {{value}}%<br>
                            {% endfor %}     
                        </td>
                    </tr>
                {% endfor %}                    
            </tbody>
        </table>
    </div>
{% endblock content %}